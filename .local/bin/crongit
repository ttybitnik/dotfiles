#!/usr/bin/env bash

# Cron job script to commit/update changes from local git repos.

printf "Updating local git repos...\n"

# List of the local git repos paths
repo_paths=(
    "${HOME}/.orpheus/gnu-emacs/org"
    "${HOME}/.orpheus/gnu-emacs/org-agenda"
    "${HOME}/.orpheus/gnu-emacs/org-roam"
)

# Iterate over each repo path and execute the git commands
for p in "${repo_paths[@]}"; do
  printf "\nProcessing repo at %s\n" "$p"

  cd "$p" || { printf "Error: Unable to change directory to %s\n" "$p" >&2
	       exit 1; }

  git add -A
  git commit -m "Update on $(LANG=C date)"
done
